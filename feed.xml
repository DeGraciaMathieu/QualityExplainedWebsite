<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.8.6">Jekyll</generator><link href="https://quality-explained.fr//feed.xml" rel="self" type="application/atom+xml" /><link href="https://quality-explained.fr//" rel="alternate" type="text/html" /><updated>2020-02-15T11:41:44+01:00</updated><id>https://quality-explained.fr//feed.xml</id><title type="html">Quality Explained</title><subtitle>Qualité web en PHP</subtitle><author><name>De Gracia Mathieu</name></author><entry><title type="html">Nombre magique</title><link href="https://quality-explained.fr//nombre-magique/" rel="alternate" type="text/html" title="Nombre magique" /><published>2020-02-13T00:00:00+01:00</published><updated>2020-02-13T00:00:00+01:00</updated><id>https://quality-explained.fr//nombre-magique</id><content type="html" xml:base="https://quality-explained.fr//nombre-magique/">&lt;p&gt;Un nombre magique est une valeur, le plus souvent un integer, ayant un sens métier et présent en dur dans votre code.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-php&quot; data-lang=&quot;php&quot;&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?php&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;setOrder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Order&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$order&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$order&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;state&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Exception&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;nv&quot;&gt;$this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;order&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$order&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;La lecture d’&lt;strong&gt;un nombre magique n’est pas instinctivement explicite&lt;/strong&gt;, elle nécessite des connaissances particulières ou un effort supplémentaire pour en saisir le sens.&lt;/p&gt;

&lt;p&gt;Cette &lt;strong&gt;incertitude est délétère&lt;/strong&gt; pour la lisibilité et la simplicité de votre code.&lt;/p&gt;

&lt;p&gt;La démultiplication d’un même nombre magique au sein d’une application est également &lt;strong&gt;problématique pour sa maintenabilité&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Le moindre changement de valeur se doit ainsi d’être répercuté sur l’intégralité de l’application afin d’en prévenir des effets de bord.&lt;/p&gt;

&lt;p&gt;Un nombre magique aura donc tendance à rendre votre code &lt;strong&gt;plus cryptique et moins maintenable&lt;/strong&gt; sur le long terme ou pour un nouveau développeur intégrant le projet.&lt;/p&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;how-to-fix&quot;&gt;How to fix&lt;/h1&gt;

&lt;p&gt;L’idée générale est d’&lt;strong&gt;externaliser et d’expliciter&lt;/strong&gt; ces nombres magiques.&lt;/p&gt;

&lt;p&gt;Si le nombre magique est statique qu’importe le contexte d’utilisation alors &lt;strong&gt;l’écriture de constantes&lt;/strong&gt;, ou d’une &lt;a href=&quot;https://github.com/BenSampo/laravel-enum&quot;&gt;class Enum&lt;/a&gt;, peut s’avérer judicieux pour encapsuler et &lt;strong&gt;rendre transposable ces valeurs métiers&lt;/strong&gt;.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-php&quot; data-lang=&quot;php&quot;&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?php&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;setOrder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Order&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$order&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$order&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;state&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;OrderStateConstants&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;BLOCKED&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;UnexpectedStateException&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;nv&quot;&gt;$this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;order&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$order&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Dans le cas contraire un &lt;a href=&quot;https://laravel.com/docs/master/configuration&quot;&gt;fichier de configuration&lt;/a&gt; sera probablement plus pertinent.&lt;/p&gt;</content><author><name>De Gracia Mathieu</name></author><summary type="html">Un nombre magique est une valeur, le plus souvent un integer, ayant un sens métier et présent en dur dans votre code.</summary></entry><entry><title type="html">La distance sémantique</title><link href="https://quality-explained.fr//distance-semantique/" rel="alternate" type="text/html" title="La distance sémantique" /><published>2020-02-12T00:00:00+01:00</published><updated>2020-02-12T00:00:00+01:00</updated><id>https://quality-explained.fr//distance-semantique</id><content type="html" xml:base="https://quality-explained.fr//distance-semantique/">&lt;p&gt;La distance sémantique est définie par &lt;strong&gt;l’écart qui existe entre le nom d’une méthode et son code concret.&lt;/strong&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-php&quot; data-lang=&quot;php&quot;&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?php&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;requestHttpTokenValidation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Validation&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$validation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;$valideable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;DnsTxtTokenValidation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;
        &lt;span class=&quot;s1&quot;&gt;'token'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$validation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;

    &lt;span class=&quot;nx&quot;&gt;Mail&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$validation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ValidationEmail&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$valideable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$valideable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Rien n’indique ici que la création d’une validation implique d’envoyer un mail : &lt;strong&gt;Ce comportement n’est pas explicite.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;La définition d’une méthode se doit d’être &lt;strong&gt;claire sur ses intentions&lt;/strong&gt;, tout comportement caché est une source d’incomprehension et de surprise que l’on doit éviter.&lt;/p&gt;

&lt;p&gt;Une grande distance sémantique est également souvent &lt;strong&gt;révélatrice d’un problème de conception&lt;/strong&gt; et transgresse le principe de responsabilité unique : le fameux &lt;a href=&quot;https://fr.wikipedia.org/wiki/Principe_de_responsabilit%C3%A9_unique&quot;&gt;S de SOLID&lt;/a&gt;.&lt;/p&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;how-to-fix&quot;&gt;How to fix&lt;/h1&gt;

&lt;p&gt;Dans le cas présent, il est important de se poser la question suivante :&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Cette préoccupation est-elle suffisament proche pour exister au sein de cette méthode ?&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Si la réponse est oui : On peut alors chercher à &lt;strong&gt;découpler&lt;/strong&gt; cette méthode, en utilisant par exemple un &lt;a href=&quot;https://laravel.com/docs/master/events&quot;&gt;Event&lt;/a&gt;.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-php&quot; data-lang=&quot;php&quot;&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?php&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;requestHttpTokenValidation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Validation&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$validation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;$valideable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;DnsTxtTokenValidation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;
        &lt;span class=&quot;s1&quot;&gt;'token'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$validation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;

    &lt;span class=&quot;nx&quot;&gt;Event&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ValidationRequested&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$valideable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$valideable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Au contraire, si la réponse est non : Nous sommes face à un couplage temporel, il est conseillé de &lt;strong&gt;refactoriser en profondeur&lt;/strong&gt; cette méthode pour en &lt;strong&gt;extraire les différentes préoccupations.&lt;/strong&gt;&lt;/p&gt;</content><author><name>De Gracia Mathieu</name></author><summary type="html">La distance sémantique est définie par l’écart qui existe entre le nom d’une méthode et son code concret.</summary></entry></feed>